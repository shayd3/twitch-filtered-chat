"use strict";var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}/** Fanfare Plugin
 *
 * Demonstrates an example "Fanfare" plugin that displays a FrankerZ whenever
 * someone subscribes.
 *
 * Commands:
 *  //ff on:    Enables fanfare
 *  //ff off:   Disables fanfare
 *  //ff:       Displays //ff usage and whether or not fanfare is enabled
 *//* vim: set ts=2 sts=2 sw=2 et: */var FanfareCSS="\nimg.fanfare {\n  position: absolute;\n  display: none;\n}\n",FanfarePlugin=function(){/* exported FanfarePlugin */function a(b,c,d,e){_classCallCheck(this,a),this._args=e,this._on=!1,this._setupCSS(),ChatCommands.add("ff",this._onFfCmd,"From plugin FanfarePlugin: Enable or disable fanfare",this),ChatCommands.addUsage("ff","on","Enable fanfare",{literal:!0}),ChatCommands.addUsage("ff","off","Disable fanfare",{literal:!0}),ChatCommands.addUsage("ff","show-sub","Display the subscriber fanfare",{literal:!0}),d.bind("twitch-sub",this._onSubEvent.bind(this,d)),d.bind("twitch-resub",this._onSubEvent.bind(this,d)),d.bind("twitch-giftsub",this._onSubEvent.bind(this,d)),d.bind("twitch-anongiftsub",this._onSubEvent.bind(this,d)),b(this)}return _createClass(a,[{key:"_setupCSS",value:function b(){var a=document.createElement("style");a.setAttribute("type","text/css"),a.setAttribute("id","ff-styles"),a.setAttribute("data-from","plugin"),a.innerText=FanfareCSS,document.head.appendChild(a)}},{key:"_onFfCmd",value:function e(a,b,c,d){if(0===b.length)d._on?Content.addInfo("Fanfare is enabled"):Content.addInfo("Fanfare is disabled"),this.printUsage();else if("on"===b[0]||"off"===b[0])d._on="on"===b[0],Content.addInfo("Fanfare is now "+(d._on?"enabled":"disabled"));else if("show-sub"===b[0]){var f=d._on;d._on=!0,d._onSubEvent(c,{}),d._on=f}else Content.addError("Fanfare: unknown argument "+b[0].escape()),this.printUsage()}},{key:"_onSubEvent",value:function k(a){var b=this;if(this._on){var d=function(d){var c=$(d),e=$("<img class=\"fanfare\" width=\"100%\" height=\"100%\" />");e.attr("src",a.GetEmote("FrankerZ")),e.css("position","absolute");var f=b;e.on("load",function(){$(this).fadeTo(400,.25),window.setTimeout(f._removeFanfare.bind(f,this),1e3)}),c.prepend(e)},e=!0,f=!1,g=void 0;try{for(var h,d,j=$(".module .content")[Symbol.iterator]();!(e=(h=j.next()).done);e=!0)i=h.value,d(d)}catch(a){f=!0,g=a}finally{try{!e&&j.return&&j.return()}finally{if(f)throw g}}}}},{key:"_removeFanfare",value:function b(a){$(a).fadeOut(400,function(){$(this).hide()})}},{key:"toString",value:function a(){return"[object FanfarePlugin]"}},{key:"name",get:function a(){return"FanfarePlugin"}}]),a}();