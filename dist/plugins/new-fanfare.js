/* Example plugin defining a new fanfare
 *
 * Shows a splash of PJSalt emotes when a NOTICE is received from Twitch.
 *
 * To add, type the following commands:
 *  //plugins add SampleFanfarePlugin new-fanfare.js [<config>]
 *
 * Anything passed via <config> can be accessed through
 * this._config.PluginConfig
 */"use strict";var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"==typeof b||"function"==typeof b)?b:a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}/* globals FanfareEffect FanfareParticle *//* vim: set ts=2 sts=2 sw=2 et: */var SampleFanfareEffect=function(a){function b(a,c,d){_classCallCheck(this,b);var e=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));return e._host=a,e._config=c,e._event=d,e}return _inherits(b,a),_createClass(b,[{key:"initialize",value:function a(){for(var b=0;b<this.num;++b)this._particles.push(new FanfareParticle({xrange:[0,this._host.width-40],y:this._host.height-30,dxrange:[-1,1],dyrange:[-20,-10],xforcerange:[-.1,.1],yforcerange:[1.1,.9],image:this._image}))}},{key:"name",get:function a(){return"SampleFanfareEffect"}},{key:"num",get:function a(){return 30}},{key:"emote",get:function a(){return"PJSalt"}}]),b}(FanfareEffect),SampleFanfarePlugin=function(){/* exported SampleFanfarePlugin */function a(b,c,d,e,f){_classCallCheck(this,a),this._args=e,this._config=f,this._host=d.get("Fanfare"),this._host.bindClient("twitch-notice",this._onEvent.bind(this,d)),ChatCommands.add("newffdemo",this._onCmd,"From plugin SampleFanfarePlugin: demonstrate the effect",this),b(this)}return _createClass(a,[{key:"_onCmd",value:function e(a,b,c,d){d._onEvent(c,{})}},{key:"_onEvent",value:function e(a,b){var c=this;Util.Debug("Received event:",b);var d=new SampleFanfareEffect(this._host,this.config,b);d.load().then(function(){c._host.addEffect(d)}).catch(function(a){Util.Error("Failed to load effect "+d.name+":",a,d)})}},{key:"config",get:function a(){return this._config.PluginConfig.SampleFanfare?this._config.PluginConfig.SampleFanfare:{enable:!0}}},{key:"name",get:function a(){return"SampleFanfarePlugin"}}]),a}();